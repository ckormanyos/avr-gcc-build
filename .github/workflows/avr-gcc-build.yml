##############################################################################
#  Copyright Christopher Kormanyos 2023.
#  Distributed under The Unlicense.

name: avr-gcc-build
on:
  push:
    branches:
      - '**'
  pull_request:
jobs:
  avr-gcc-build-native:
    runs-on: ubuntu-latest
    defaults:
      run:
        shell: bash
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: '0'
      - name: update-tools
        run: sudo apt install libgmp-dev libmpfr-dev libmpc-dev
      - name: avr-gcc-build-001-make-dirs
        run: |
          echo "run avr-gcc-001-make-dirs.sh"
          ./avr-gcc-001-make-dirs.sh
      - name: avr-gcc-build-002-build-isl
        run: |
          echo "run avr-gcc-002-build-isl.sh"
          ./avr-gcc-002-build-isl.sh
          echo "verify build isl"
          ls -la /home/runner/work/avr-gcc-build/avr-gcc-build/local/isl-0.15
      - name: avr-gcc-build-003-build-binutils
        run: |
          echo "run avr-gcc-003-build-binutils.sh"
          ./avr-gcc-003-build-binutils.sh
          echo "verify build binutils"
          ls -la /home/runner/work/avr-gcc-build/avr-gcc-build/local/gcc-13.2.0-avr
